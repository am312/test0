name: demo
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: 
  release:
    types: [published]

jobs:
  set-version-variable:
    runs-on: ubuntu-latest
    env:
      TAG_NAME: ${{ github.event.release.tag_name }}
    steps:
      - name: Strip leading 'v' from tag, if present, and store in VERSION
        run: |
          VERSION=$(echo ${TAG_NAME/#v/})
          echo "This is version $VERSION"
          echo "This is github tag $TAG_NAME"
    outputs:
      githubEnv: $VERSION
  job-one:
    needs: set-version-variable
    runs-on: ubuntu-latest
    steps:
      - run: echo "tagname $TAG_NAME"
      - run: echo "ver $VERSION"
      - run: echo "ver2 $VERSION2"
      - run: echo "ref_name $REF"
      - run: echo "0 ${{ needs.set-version-variable.outputs.githubEnv }}"
#       - run: echo "envi ${{ env.VERSION }}"
  job-two:
    needs: set-version-variable
    runs-on: ubuntu-latest
    steps:
      - run: echo "tagname $TAG_NAME"
      - run: echo "ver $VERSION"
      - run: echo "ver2 $VERSION2"
      - run: echo "ref_name $REF"
      - run: echo "0 ${{ needs.set-version-variable.outputs.githubEnv }}"
#       - run: echo "envi ${{ env.VERSION }}"



