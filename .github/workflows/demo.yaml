name: demo
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: 
  release:
    types: [published]

jobs:
  set-version-variable:
    runs-on: ubuntu-latest
    env:
      TAG_NAME: ${{ github.event.release.tag_name }}
#       VERSION: $(echo ${TAG_NAME/#v/})
    steps:
#       - name: Strip leading 'v' from tag, if present, and store in VERSION
        - id: version_name
          run: echo "::set-output name=version::$(echo ${TAG_NAME/#v/})"
    outputs:
      githubEnv: ${{ steps.version_name.outputs.version }}
      
  job-one:
    needs: set-version-variable
    runs-on: ubuntu-latest
    steps:
      - run: echo "test before"
      - run: echo ${{needs.set-version-variable.outputs.githubEnv}}
      - run: echo "$VERSION = ${{needs.set-version-variable.outputs.githubEnv}}"
      - run: echo "VERSION IS NOW $VERSION"
      - run: echo "test"
#         - run: echo "tagname $TAG_NAME"
#         - run: echo "ver $VERSION"
#         - run: echo "ver2 $VERSION2"
#         - run: echo "ref_name $REF"
#         - run: echo "envi ${{ env.VERSION }}"
  job-two:
    needs: set-version-variable
    runs-on: ubuntu-latest
    steps:
      - run: echo "test before"
      - run: echo ${{needs.set-version-variable.outputs.githubEnv}}
      - run: echo "$VERSION = ${{needs.set-version-variable.outputs.githubEnv}} >> $GITHUB_ENV"
      - run: echo "version $VERSION"
      - run: echo "personal test ${{VERSION}}
      - run: echo "test"
#       - run: echo "tagname $TAG_NAME"
#       - run: echo "ver $VERSION"
#       - run: echo "ver2 $VERSION2"
#       - run: echo "ref_name $REF"
#       - run: echo "envi ${{ env.VERSION }}"



