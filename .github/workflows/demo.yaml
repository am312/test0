name: demo
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: 
  release:
    types: [published]

jobs:
  set-version-variable:
    runs-on: ubuntu-latest
    env:
      TAG_NAME: ${{ github.event.release.tag_name }}
#     steps:
#       - name: Strip leading 'v' from tag, if present
#         run: echo "VERSION=$(echo ${TAG_NAME/#v/})" >> $GITHUB_ENV
    outputs:
      -name: Strip leading 'v' from tag and return
      githubEnv: $(echo ${TAG_NAME/#v/})
  job-one:
    needs: set-version-variable
    runs-on: [ubuntu-latest, "${{ needs.set-version-variable.githubEnv }}"]
    steps:
      - run: echo "tagname $TAG_NAME"
      - run: echo "ver $VERSION"
      - run: echo "ver2 $VERSION2"
      - run: echo "ref_name $REF"
      - run: echo "0 ${{ needs.set-version-variable.githubEnv }}"
      - run: echo "envi ${{ env.VERSION }}"
  job-two:
    needs: set-version-variable
    runs-on: [ubuntu-latest, "${{ needs.set-version-variable.githubEnv }}"]
    steps:
      - run: echo "tagname $TAG_NAME"
      - run: echo "ver $VERSION"
      - run: echo "ver2 $VERSION2"
      - run: echo "ref_name $REF"
      - run: echo "0 ${{ needs.set-version-variable.githubEnv }}"
      - run: echo "envi ${{ env.VERSION }}"



